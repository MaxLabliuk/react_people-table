{"version":3,"sources":["apiFetch.js","Person.js","PeopleTable.js","PeopleList.js","App.js","index.js"],"names":["API_URL","Person","_ref","person","selectHandler","selectedPerson","react_default","a","createElement","onClick","id","className","born","name","sex","died","mother","father","age","century","PeopleTable","handleSortClick","filteredPeople","map","src_Person","key","PeopleList","_useState","useState","_useState2","Object","slicedToArray","people","setPeople","_useState3","_useState4","setSelectedPerson","history","useHistory","location","useLocation","searchParams","URLSearchParams","search","sortBy","get","sortOrder","toConsumableArray","filter","toLowerCase","includes","peopleArr","field","sortedPeople","sort","b","localeCompare","reverse","sortPeople","useEffect","peopleFromServer","preparedPeople","regenerator_default","async","_context","prev","next","awrap","fetch","then","response","json","sent","index","objectSpread2","Math","ceil","stop","loadPeople","Fragment","lib","debounceTimeout","type","placeholder","onChange","event","value","target","trim","set","push","toString","length","src_PeopleTable","textContent","App","react_router_dom","to","exact","react_router","path","render","component","ReactDOM","src_App_0","test","document","getElementById"],"mappings":"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","file":"static/js/main.0217d1bc.chunk.js","sourcesContent":["export const API_URL\n  = 'https://mate-academy.github.io/react_people-table/api/people.json';\n\nexport const fetchPeopleFromServer = () => (\n  fetch(API_URL).then(response => response.json()));\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nconst Person = ({ person, selectHandler, selectedPerson }) => (\n  <tr\n    onClick={() => selectHandler(person.id)}\n    className={selectedPerson === person.id ? 'selected' : ''}\n  >\n    <th>{person.id}</th>\n    <th className={person.born < 1650 ? 'line-through' : ''}>{person.name}</th>\n    <th className={person.sex === 'm' ? 'man' : 'woman'}>{person.sex}</th>\n    <th>{person.born}</th>\n    <th>{person.died}</th>\n    <th>{person.mother}</th>\n    <th>{person.father}</th>\n    <th className={person.age >= 65 ? 'green' : ''}>{person.age}</th>\n    <th>{person.century}</th>\n  </tr>\n);\n\nPerson.propTypes = {\n  person: PropTypes.shape({\n    id: PropTypes.number.isRequired,\n    name: PropTypes.string.isRequired,\n    sex: PropTypes.string.isRequired,\n    born: PropTypes.number.isRequired,\n    died: PropTypes.number.isRequired,\n    mother: PropTypes.string.isRequired,\n    father: PropTypes.string.isRequired,\n    age: PropTypes.number.isRequired,\n    century: PropTypes.number.isRequired,\n  }).isRequired,\n  selectHandler: PropTypes.func.isRequired,\n  selectedPerson: PropTypes.number.isRequired,\n};\n\nexport default Person;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport Person from './Person';\n\nconst PeopleTable = ({\n  handleSortClick,\n  filteredPeople,\n  selectedPerson,\n  selectHandler,\n}) => (\n  <table className=\"table\">\n    <thead>\n      <tr className=\"tableTitle\" onClick={handleSortClick}>\n        <th>id</th>\n        <th>name</th>\n        <th>sex</th>\n        <th>born</th>\n        <th>died</th>\n        <th>mother</th>\n        <th>father</th>\n        <th>age</th>\n        <th>century</th>\n      </tr>\n    </thead>\n    <tbody>\n      {filteredPeople.map(person => (\n        <Person\n          person={person}\n          key={person.id}\n          selectHandler={selectHandler}\n          selectedPerson={selectedPerson}\n        />\n      ))}\n    </tbody>\n  </table>\n);\n\nPeopleTable.propTypes = {\n  handleSortClick: PropTypes.func.isRequired,\n  selectedPerson: PropTypes.number.isRequired,\n  selectHandler: PropTypes.func.isRequired,\n  filteredPeople: PropTypes.arrayOf(PropTypes.any).isRequired,\n};\n\nexport default PeopleTable;\n","import React, { useState, useEffect } from 'react';\nimport { useHistory, useLocation } from 'react-router-dom';\nimport { DebounceInput } from 'react-debounce-input';\nimport { fetchPeopleFromServer, API_URL } from './apiFetch';\nimport PeopleTable from './PeopleTable';\n\nconst PeopleList = () => {\n  const [people, setPeople] = useState([]);\n  const [selectedPerson, setSelectedPerson] = useState(0);\n  const history = useHistory();\n  const location = useLocation();\n  const searchParams = new URLSearchParams(location.search);\n  const sortBy = searchParams.get('sortBy');\n  const sortOrder = searchParams.get('sortOrder');\n\n  let filteredPeople = [...people]\n    .filter(person => (person.name + person.mother + person.father)\n      .toLowerCase()\n      .includes(searchParams.get('query') || ''));\n\n  const selectHandler = id => setSelectedPerson(id);\n\n  filteredPeople = sortPeople([...filteredPeople], sortBy, sortOrder);\n\n  useEffect(() => {\n    const loadPeople = async() => {\n      const peopleFromServer = await fetchPeopleFromServer(API_URL);\n      const preparedPeople = peopleFromServer.map((person, index) => ({\n        ...person,\n        id: index + 1,\n        age: person.died - person.born,\n        mother: person.mother || '',\n        father: person.father || '',\n        century: Math.ceil(person.died / 100),\n      }));\n\n      setPeople(preparedPeople);\n    };\n\n    loadPeople();\n  }, []);\n\n  function sortPeople(peopleArr, field) {\n    const sortedPeople = [...peopleArr]\n      .sort((a, b) => (typeof a[field] === 'string'\n        ? a[field].localeCompare(b[field])\n        : a[field] - b[field]));\n\n    return sortOrder === 'desc' ? sortedPeople.reverse() : sortedPeople;\n  }\n\n  const filterPeople = (event) => {\n    const value = event.target.value.trim().toLowerCase();\n\n    searchParams.set('query', value);\n    history.push({ search: searchParams.toString() });\n  };\n\n  const handleSortClick = (event) => {\n    const field = event.target.textContent;\n\n    if (sortBy !== field) {\n      searchParams.set('sortBy', field);\n      searchParams.set('sortOrder', 'asc');\n    } else {\n      searchParams.set('sortOrder', sortOrder === 'asc' ? 'desc' : 'asc');\n    }\n\n    history.push({ search: searchParams.toString() });\n  };\n\n  return (\n    <>\n      <h1>People Table</h1>\n      <DebounceInput\n        debounceTimeout={1000}\n        type=\"search\"\n        placeholder=\"search\"\n        onChange={filterPeople}\n        className=\"input\"\n      />\n      {filteredPeople.length === 0\n        ? <p>Person  is not found</p>\n        : (\n          <PeopleTable\n            filteredPeople={filteredPeople}\n            handleSortClick={handleSortClick}\n            selectHandler={selectHandler}\n            selectedPerson={selectedPerson}\n          />\n        )\n      }\n    </>\n  );\n};\n\nexport default PeopleList;\n","import React from 'react';\nimport { NavLink, Route, Switch } from 'react-router-dom';\nimport PeopleList from './PeopleList';\nimport './App.css';\n\nconst App = () => (\n  <div className=\"container\">\n    <NavLink\n      className=\"link\"\n      to=\"/\"\n      exact\n    >\nHome\n    </NavLink>\n    <NavLink className=\"link\" to=\"/people\">People Table</NavLink>\n    <Switch>\n      <Route path=\"/\" exact render={() => <h1>Home Page</h1>} />\n      <Route path=\"/people/:name?\" component={PeopleList} />\n    </Switch>\n  </div>\n);\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter } from 'react-router-dom';\n\nimport App from './App';\n\nReactDOM.render(\n  <HashRouter>\n    <App test={123} />\n  </HashRouter>, document.getElementById('root')\n);\n"],"sourceRoot":""}